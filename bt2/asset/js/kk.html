<script type="text/javascript">
  var tawkToInterval;
  var tawkToHideInterval;
  var Tawk_API = Tawk_API || {},
    Tawk_LoadStart = new Date();
  window.addEventListener("load", function () {
    arcItem.onClick = function (e) {
      e.preventDefault();
      jQuery("#arcontactus").contactUs("closeMenu");
      if (typeof FB == "undefined" || typeof FB.CustomerChat == "undefined") {
        console.error(
          "Facebook customer chat integration is disabled in module configuration"
        );
        return false;
      }
      jQuery("#arcontactus").contactUs("hide");
      jQuery("#ar-fb-chat").addClass("active");
      FB.CustomerChat.show(true);
      //FB.CustomerChat.showDialog();
    };
    
    arcItem.onClick = function (e) {
      e.preventDefault();
      jQuery("#arcontactus").contactUs("closeMenu");
      if (typeof Tawk_API == "undefined") {
        console.error(
          "Tawk.to integration is disabled in module configuration"
        );
        return false;
      }
      jQuery("#arcontactus").contactUs("hide");
      clearInterval(tawkToHideInterval);
      Tawk_API.showWidget();
      Tawk_API.maximize();
      tawkToInterval = setInterval(function () {
        checkTawkIsOpened();
      }, 100);
    };

    Tawk_API.onLoad = function () {
      if (!Tawk_API.isChatOngoing()) {
        Tawk_API.hideWidget();
      } else {
        jQuery("#arcontactus").contactUs("hide");
        clearInterval(tawkToHideInterval);
        tawkToInterval = setInterval(function () {
          checkTawkIsOpened();
        }, 100);
      }
    };
    Tawk_API.onChatMinimized = function () {
      Tawk_API.hideWidget();
      setTimeout(function () {
        Tawk_API.hideWidget();
      }, 100);
      jQuery("#arcontactus").contactUs("show");
    };
    Tawk_API.onChatEnded = function () {
      Tawk_API.hideWidget();
      setTimeout(function () {
        Tawk_API.hideWidget();
      }, 100);
      jQuery("#arcontactus").contactUs("show");
    };
    Tawk_API.onChatStarted = function () {
      jQuery("#arcontactus").contactUs("hide");
      clearInterval(tawkToHideInterval);
      Tawk_API.showWidget();
      Tawk_API.maximize();
      tawkToInterval = setInterval(function () {
        checkTawkIsOpened();
      }, 100);
    };
    (function () {
      var s1 = document.createElement("script"),
        s0 = document.getElementsByTagName("script")[0];
      s1.async = true;
      s1.src = "https://embed.tawk.to/5c583e196cb1ff3c14cb0b4f/default";
      s1.charset = "UTF-8";
      s1.setAttribute("crossorigin", "*");
      s0.parentNode.insertBefore(s1, s0);
    })();
    var hideCustomerChatInterval;
    FB.Event.subscribe("customerchat.dialogHide", function () {
      jQuery("#ar-fb-chat").removeClass("active");
      jQuery("#arcontactus").contactUs("show");
      FB.CustomerChat.hide();
    });
    FB.Event.subscribe("customerchat.dialogShow", function () {
      jQuery("#ar-fb-chat").addClass("active");
      jQuery("#arcontactus").contactUs("hide");
    });
    FB.Event.subscribe("customerchat.load", function () {
      /*hideCustomerChatInterval = setInterval(function(){
if (jQuery('.fb_dialog').is(':visible')) {
FB.CustomerChat.hide();
clearInterval(hideCustomerChatInterval);
}
}, 100);*/
    });

  });
  function checkTawkIsOpened() {
    if (Tawk_API.isChatMinimized()) {
      Tawk_API.hideWidget();
      jQuery("#arcontactus").contactUs("show");
      clearInterval(tawkToInterval);
    }
  }
  function tawkToHide() {
    tawkToHideInterval = setInterval(function () {
      if (typeof Tawk_API.hideWidget != "undefined") {
        Tawk_API.hideWidget();
      }
    }, 100);
  }
  tawkToHide();
  
</script>
<style type="text/css">
  .fb-customerchat > span > iframe {
    right: 10px !important;
    left: auto !important;
  }
  .fb-customerchat
    > span
    > iframe.fb_customer_chat_bounce_in_v2_mobile_chat_started {
    right: 0 !important;
  }
  #ar-fb-chat {
    display: none;
  }
  #ar-fb-chat.active {
    display: block;
  }
  @media (max-width: 480px) {
    .fb-customerchat > span > iframe {
      left: 0 !important;
      right: 0 !important;
    }
  }
</style>
<div id="ar-fb-chat">
  <div id="fb-root"></div>
  <script>
    (function (d, s, id) {
      var js,
        fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s);
      js.id = id;
      js.src =
        "//connect.facebook.net/en_US/sdk/xfbml.customerchat.js#xfbml=1&version=v6.0&autoLogAppEvents=1";
      fjs.parentNode.insertBefore(js, fjs);
    })(document, "script", "facebook-jssdk-chat");
  </script>
  <div
    class="fb-customerchat"
    attribution="setup_tool"
    page_id="2082138548680375"
    greeting_dialog_display="hide"
    theme_color="#6C9CFF"
  ></div>
</div>











<?php
/**
 * Hooks for the footer.
 *
 * @package    ThemeGrill
 * @subpackage ColorMag
 * @since      ColorMag 2.0.0
 */

// Exit if accessed directly.
if ( ! defined( 'ABSPATH' ) ) {
	exit;
}


if ( ! function_exists( 'colormag_main_section_inner_end' ) ) :

	/**
	 *  Main section inner ends.
	 */
	function colormag_main_section_inner_end() {
		?>
		</div><!-- .inner-wrap -->
		<?php
	}

endif;


if ( ! function_exists( 'colormag_main_section_end' ) ) :

	/**
	 * Main section ends.
	 */
	function colormag_main_section_end() {
		?>
		</div><!-- #main -->
		<?php
	}

endif;


if ( ! function_exists( 'colormag_advertisement_above_footer_sidebar' ) )  :

	/**
	 * Advertisement above footer sidebar area.
	 */
	function colormag_advertisement_above_footer_sidebar() {

		if ( is_active_sidebar( 'colormag_advertisement_above_the_footer_sidebar' ) ) :
			?>
			<div class="advertisement_above_footer">
				<div class="inner-wrap">
					<?php dynamic_sidebar( 'colormag_advertisement_above_the_footer_sidebar' ); ?>
				</div>
			</div>
			<?php
		endif;

	}

endif;


if ( ! function_exists( 'colormag_footer_start' ) ) :

	/**
	 * Footer starts.
	 */
	function colormag_footer_start() {
		?>
		<footer id="colophon" class="clearfix <?php echo esc_attr( colormag_footer_layout_class() ); ?>">
		<?php
	}

endif;


if ( ! function_exists( 'colormag_footer_sidebar' ) ) :

	/**
	 * Footer sidebar.
	 */
	function colormag_footer_sidebar() {
		get_sidebar( 'footer' );
	}

endif;


if ( ! function_exists( 'colormag_footer_socket_inner_wrapper_start' ) ) :

	/**
	 * Footer socket inner wrapper starts.
	 */
	function colormag_footer_socket_inner_wrapper_start() {
		?>
		<div class="footer-socket-wrapper clearfix">
			<div class="inner-wrap">
		<?php
	}

endif;


if ( ! function_exists( 'colormag_footer_socket_area_start' ) ) :

	/**
	 * Footer socket area starts.
	 */
	function colormag_footer_socket_area_start() {
		?>
		<div class="footer-socket-area">
		<?php
	}

endif;


if ( ! function_exists( 'colormag_footer_socket_right_section' ) ) :

	/**
	 * Footer socket area right section.
	 */
	function colormag_footer_socket_right_section() {

		$social_links_enable   = get_theme_mod( 'colormag_social_link_activate', 0 );
		$social_links_location = get_theme_mod( 'colormag_social_link_location_option', 'both' );
		?>

		<div class="footer-socket-right-section">
			<?php
			if ( 1 == $social_links_enable && ( 'both' === $social_links_location || 'footer' === $social_links_location ) ) {
				colormag_social_links();
			}
			?>
		</div>

		<?php

	}

endif;


if ( ! function_exists( 'colormag_footer_socket_left_section' ) ) :

	/**
	 * Footer socket area left section.
	 */
	function colormag_footer_socket_left_section() {
		?>
		<div class="footer-socket-left-section">
			<?php do_action( 'colormag_footer_copyright' ); ?>
		</div>
		<?php
	}

endif;


if ( ! function_exists( 'colormag_footer_socket_area_end' ) ) :

	/**
	 * Footer socket area ends.
	 */
	function colormag_footer_socket_area_end() {
		?>
		</div><!-- .footer-socket-area -->
		<?php
	}

endif;


if ( ! function_exists( 'colormag_footer_socket_inner_wrapper_end' ) ) :

	/**
	 * Footer socket inner wrapper ends.
	 */
	function colormag_footer_socket_inner_wrapper_end() {
		?>
			</div><!-- .inner-wrap -->
		</div><!-- .footer-socket-wrapper -->
		<?php
	}

endif;


if ( ! function_exists( 'colormag_footer_end' ) ) :

	/**
	 * Footer ends.
	 */
	function colormag_footer_end() {
		?>
		</footer><!-- #colophon -->
		<?php
	}

endif;


if ( ! function_exists( 'colormag_scroll_top_button' ) ) :

	/**
	 * Scroll to top button.
	 */
	function colormag_scroll_top_button() {
		?>
		<a href="#masthead" id="scroll-up"><i class="fa fa-chevron-up"></i></a>
		<?php
	}

endif;


if ( ! function_exists( 'colormag_page_end' ) ) :

	/**
	 * Page end.
	 */
	function colormag_page_end() {
		?>
		</div><!-- #page -->
		<?php
	}

endif;


if ( ! function_exists( 'colormag_footer_copyright' ) ) :

	/**
	 * Shows the footer copyright information.
	 */
	function colormag_footer_copyright() {

		$site_link = '<a href="' . esc_url( home_url( '/' ) ) . '" title="' . esc_attr( get_bloginfo( 'name', 'display' ) ) . '" ><span>' . get_bloginfo( 'name', 'display' ) . '</span></a>';

		$wp_link = '<a href="https://wordpress.org" target="_blank" title="' . esc_attr__( 'WordPress', 'colormag' ) . '"><span>' . esc_html__( 'WordPress', 'colormag' ) . '</span></a>';

		$tg_link = '<a href="https://themegrill.com/themes/colormag" target="_blank" title="' . esc_attr__( 'ThemeGrill', 'colormag' ) . '" rel="author"><span>' . esc_html__( 'ThemeGrill', 'colormag' ) . '</span></a>';

		$default_footer_value = sprintf( /* Translators: %1$s: Current year, %2$s: Site link */ esc_html__( 'Copyright &copy; %1$s %2$s. All rights reserved.', 'colormag' ), date( 'Y' ), $site_link ), $wp_link );

		$colormag_footer_copyright = '<div class="copyright">' . $default_footer_value . '</div>';

		echo $colormag_footer_copyright; // phpcs:ignore WordPress.XSS.EscapeOutput.OutputNotEscaped

	}

endif;
